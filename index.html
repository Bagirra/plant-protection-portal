<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Protection Portal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.9/css/weather-icons.min.css">
     <!-- <script type="module" src="path/to/your-auth-script.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js"></script>
</head>
<body>
    <div class="content-wrapper">
        <header>
            <h2>МОЛДОВА ЮГ</h2>
            <!-- Кнопка гамбургер-меню -->
            <div class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav>
                <ul id="navMenu" class="nav-links">
                    <li><a href="pests.html">Вредители и Болезни</a></li>
                    <li><a href="news.html">Новости</a></li>
                    <li><a href="meteo.html">Данные метеостанции</a></li>
                    <li id="loginNav"><a href="login.html">Вход</a></li>
                    <li id="registerNav"><a href="register.html">Регистрация</a></li>
                </ul>
            </nav>
        </header>
        <main>
            <h2>Интегрированная Система Защиты Растений</h2>
        
        </main>
        
    <header>
        <h2>Тараклия погода сегодня</h2>
    </header>
    <section id="currentWeather" class="weather-section">
        <div class="weather-icon-container">
            <img id="weatherIcon" alt="Weather Icon" src="images/sunny.png">
        </div>
        <div class="weather-info">
            <p id="temperature">— °C</p>
            <p id="humidity">Влажность: — %</p>
            <p id="windSpeed">Ветер: — км/ч</p>
            <p id="precipitation">Осадки: — мм</p>
            <p id="pressure">Давление: — мм рт. ст.</p>
        </div>
    </section>

    <header>
        <h2>Прогноз на 5 дней</h2>
    </header>
    <main>
        <section id="forecast">
            <div id="forecastContainer" class="forecast-section">
                <!-- Прогноз отображается здесь -->
            </div>
        </section>
    </main>
    

    <main>
        <section>
            <h2>Определитель Вредителей и Болезней</h2>
            <form id="upload-form">
                <label for="imageUpload">Загрузите изображение:</label>
                <input type="file" id="imageUpload" name="imageUpload" accept="image/*">
                <button type="submit">Определить</button>
            </form>
            <div id="result"></div>
        </section>
    </main>
        <script src="script.js"></script>
        <script src="script_i.js"></script>
        <footer>
            <p>&copy; 2024 Plant Protection Portal</p>
        </footer>
        
    </div>  
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD2-uD34cHObkqQ8RE-Q6Dyb2vadfb2WtU",
            authDomain: "plant-49d4d.firebaseapp.com",
            projectId: "plant-49d4d",
            storageBucket: "plant-49d4d.appspot.com",
            messagingSenderId: "531376250260",
            appId: "1:531376250260:web:5990e5414890299a6c0381",
            measurementId: "G-45R61MG9V5"
        };
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        // Handle user state changes
        onAuthStateChanged(auth, (user) => {
            const loginNav = document.getElementById("loginNav");
            const registerNav = document.getElementById("registerNav");
            const navMenu = document.getElementById("navMenu");
            if (user) {
                // User is logged in
                loginNav.style.display = "none";
                registerNav.style.display = "none";
                // Add "Личный кабинет" and "Выход"
                const dashboardNav = document.createElement("li");
                dashboardNav.id = "dashboardNav";
                dashboardNav.innerHTML = `<a href="dashboard.html">Личный кабинет</a>`;
                navMenu.appendChild(dashboardNav);
                const logoutNav = document.createElement("li");
                logoutNav.id = "logoutNav";
                logoutNav.innerHTML = `<a href="#" id="logoutButton">Выход</a>`;
                navMenu.appendChild(logoutNav);
                // Handle logout
                document.getElementById("logoutButton").addEventListener("click", (e) => {
                    e.preventDefault();
                    signOut(auth)
                        .then(() => {
                            // Refresh page after logout
                            window.location.reload();
                        })
                        .catch((error) => {
                            console.error("Ошибка при выходе:", error);
                        });
                });
            } else {
                // User is logged out
                loginNav.style.display = "block";
                registerNav.style.display = "block";
                // Remove "Личный кабинет" and "Выход" if they exist
                const dashboardNav = document.getElementById("dashboardNav");
                const logoutNav = document.getElementById("logoutNav");
                if (dashboardNav) dashboardNav.remove();
                if (logoutNav) logoutNav.remove();
            }
        });
    
        const menuToggle = document.getElementById('menuToggle');
        const navMenu = document.getElementById('navMenu');

        // Обработчик клика по гамбургер-меню
        menuToggle.addEventListener('click', () => {
            navMenu.classList.toggle('active'); // Добавляем/убираем класс active
            menuToggle.classList.toggle('active');
        });
    </script>
    
</body>
</html>
